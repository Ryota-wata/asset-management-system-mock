# 医療機器管理システム 画面設計書

## 目次

1. [メイン画面](#1-メイン画面)
2. [QRコード発行画面](#2-qrコード発行画面)
3. [QRコード印刷プレビュー画面](#3-qrコード印刷プレビュー画面)
4. [資産検索結果画面](#4-資産検索結果画面)
5. [現有資産調査画面](#5-現有資産調査画面)
6. [登録履歴画面](#6-登録履歴画面)
7. [申請一覧画面](#7-申請一覧画面)
8. [見積依頼一覧画面](#8-見積依頼一覧画面)
9. [見積DataBox画面](#9-見積databox画面)
10. [個体管理リスト画面](#10-個体管理リスト画面)
11. [SHIP施設マスタ画面](#11-ship施設マスタ画面)
12. [SHIP資産マスタ画面](#12-ship資産マスタ画面)

---

## 1. メイン画面

### 画面概要
システムのトップ画面。各機能へのエントリーポイントとなる。

### スクリーンショット
![メイン画面](screenshots/01_メイン画面.png)

### 主要機能
- **QRコード発行**: QRコード/バーコードの新規発行・再発行
- **資産検索**: SHIPマスタからの資産検索
- **調査開始**: 現有資産の調査業務開始
- **各種一覧**: 申請一覧、見積依頼一覧、見積DataBox、個体管理リストへの遷移
- **マスタ管理**: SHIP施設マスタ、SHIP資産マスタの管理

### 画面要素
| 要素 | 説明 |
|------|------|
| ヘッダー | ロゴ、システム名、ユーザー情報 |
| メインメニュー | 各機能へのナビゲーションカード |

### 画面遷移
- QRコード発行 → QRコード発行画面
- 資産検索 → 資産検索結果画面
- 調査開始 → 現有資産調査画面
- 申請一覧 → 申請一覧画面
- 見積依頼一覧 → 見積依頼一覧画面
- 見積DataBox → 見積DataBox画面
- 個体管理リスト → 個体管理リスト画面
- SHIP施設マスタ → SHIP施設マスタ画面
- SHIP資産マスタ → SHIP資産マスタ画面

---

## 2. QRコード発行画面

### 画面概要
QRコード/バーコードラベルの新規発行および再発行を行う画面。

### スクリーンショット
![QRコード発行画面](screenshots/02_QRコード発行画面.png)

### 主要機能
- **新規発行**: アルファベット-2桁数字-5桁数字形式でQRコードを発行
- **再発行**: 既存のQRコード番号を入力して再発行
- **ラベルテンプレート選択**: QRコード/バーコードの3サイズから選択
- **フッター入力**: ラベル下部に表示するテキスト（サイズ別文字数制限あり）

### 入力項目

#### 新規発行タブ
| 項目 | 形式 | 必須 | 説明 |
|------|------|------|------|
| プレフィックス | アルファベット | ○ | 例: R07 |
| 開始番号 | 5桁数字 | ○ | 例: 00001 |
| 終了番号 | 5桁数字 | ○ | 例: 00050 |

#### 再発行タブ
| 項目 | 形式 | 必須 | 説明 |
|------|------|------|------|
| 再発行番号 | アルファベット-数字-数字 | ○ | 例: R07-00001 |

#### 共通設定
| 項目 | 形式 | 必須 | 説明 |
|------|------|------|------|
| ラベルテンプレート | 選択 | ○ | QR/バーコード、小/中/大サイズ |
| フッターテキスト | テキスト | - | ラベル下部に表示（文字数制限あり） |

### ボタン/アクション
| ボタン | 動作 |
|--------|------|
| 印刷プレビューへ | QRコード印刷プレビュー画面へ遷移 |
| 戻る | メイン画面へ戻る |

### バリデーション
- プレフィックス: アルファベットのみ
- 番号: 数字のみ、開始≤終了
- フッター文字数: 小(10文字)、中(15文字)、大(20文字)

### 画面遷移
- 印刷プレビューへ → QRコード印刷プレビュー画面
- 戻る → メイン画面

---

## 3. QRコード印刷プレビュー画面

### 画面概要
発行するQRコード/バーコードラベルの印刷プレビューを表示。

### スクリーンショット
![QRコード印刷プレビュー画面](screenshots/03_QRコード印刷プレビュー画面.png)

### 主要機能
- **プレビュー表示**: 選択されたテンプレートでラベルを表示
- **印刷設定**: ページあたりの列数/行数を設定
- **PDF出力**: ブラウザの印刷機能でPDF保存

### 表示項目
| 項目 | 説明 |
|------|------|
| ラベル一覧 | 発行するすべてのラベルのプレビュー |
| QRコード/バーコード | 各番号に対応するコード画像 |
| 番号テキスト | コード下部に番号を表示 |
| フッターテキスト | ラベル下部に設定したテキスト |

### ボタン/アクション
| ボタン | 動作 |
|--------|------|
| 印刷 | ブラウザの印刷ダイアログを開く |
| 戻る | QRコード発行画面へ戻る |

### 印刷設定
- 用紙サイズ: A4
- レイアウト: グリッド表示（列数×行数）
- マージン: 各ラベル間の余白

### 画面遷移
- 印刷 → (ブラウザ印刷ダイアログ)
- 戻る → QRコード発行画面

---

## 4. 資産検索結果画面

### 画面概要
SHIP資産マスタから検索した資産一覧を表示。

### スクリーンショット
![資産検索結果画面](screenshots/04_資産検索結果画面.png)

### 主要機能
- **資産一覧表示**: 検索結果をテーブル形式で表示
- **詳細表示**: 資産の詳細情報をモーダルで表示
- **ソート機能**: 各列でソート可能
- **データエクスポート**: CSV/Excel形式でダウンロード

### 表示項目
| 列名 | 説明 |
|------|------|
| コード | 資産コード |
| 資産名 | 資産の名称 |
| 大分類 | 資産の大分類 |
| 中分類 | 資産の中分類 |
| 品目 | 資産の品目 |
| メーカー | 製造メーカー |
| 型式 | 型式番号 |
| サイズ | W×D×H (mm) |

### ボタン/アクション
| ボタン | 動作 |
|--------|------|
| 詳細 | 資産詳細モーダルを表示 |
| エクスポート | データをCSV/Excelで出力 |
| 戻る | メイン画面へ戻る |

### フィルター機能
- キーワード検索: 資産名、コードで検索
- 分類フィルター: 大分類、中分類、品目で絞り込み

### 画面遷移
- 詳細 → 資産詳細モーダル
- 戻る → メイン画面

---

## 5. 現有資産調査画面

### 画面概要
現場での資産調査作業を統合的に行う画面。QR読取、写真撮影、資産情報登録を1画面で実施。

### スクリーンショット
![現有資産調査画面](screenshots/05_現有資産調査画面.png)

### 主要機能
- **QRコード読取**: カメラでQRコードを読み取り
- **写真撮影**: 資産の写真を撮影
- **資産情報登録**: 資産の詳細情報を入力
- **一括登録モード**: 同じ機器を複数個登録
- **履歴表示**: 登録履歴を確認

### 固定ヘッダー（スクロールしても固定）
| 項目 | 説明 |
|------|------|
| シールNo. | 資産に貼付するシール番号（一括登録時は開始番号） |
| 室名 | 資産が設置されている部屋名 |

### 入力項目

#### 基本情報
| 項目 | 必須 | 説明 |
|------|------|------|
| 登録モード | - | 一括登録モードのON/OFF |
| 資産番号 | - | 資産番号 |
| 備品番号 | - | 備品番号 |
| シリアルNo. | - | 製品のシリアル番号 |
| 購入年月日 | - | 購入日 |
| リース | - | リース品かどうか（トグル） |
| 貸出品 | - | 貸出品かどうか（トグル） |

#### 分類情報
| 項目 | 必須 | 説明 |
|------|------|------|
| 大分類 | - | 資産の大分類（フリー入力・選択・あいまい検索可） |
| 中分類 | - | 資産の中分類（フリー入力・選択・あいまい検索可） |
| 品目 | - | 資産の品目（フリー入力・選択・あいまい検索可） |
| メーカー | - | 製造メーカー（フリー入力・選択・あいまい検索可） |
| 型式 | - | 型式番号（フリー入力・選択・あいまい検索可） |

#### サイズ情報
| 項目 | 必須 | 説明 |
|------|------|------|
| W (幅) | - | 幅 (mm) |
| D (奥行) | - | 奥行 (mm) |
| H (高さ) | - | 高さ (mm) |

#### その他
| 項目 | 必須 | 説明 |
|------|------|------|
| 備考 | - | 自由記述 |

### 一括登録モード
一括登録モードをONにすると、以下の機能が有効になります：
- シールNo.が「開始シールNo.」に変更
- 画面下部に「終了シールNo.」エリアと「終了QR読取」ボタンが表示
- 開始〜終了の範囲で一括登録

#### 一括登録時の追加項目
| 項目 | 必須 | 説明 |
|------|------|------|
| 終了シールNo. | ○ | 一括登録の終了シール番号（QR読取で自動入力） |

### フッターボタン（画面下部固定）
| ボタン | 動作 |
|--------|------|
| 戻る | メイン画面へ戻る |
| 履歴表示 | 登録履歴画面を表示 |
| QR読取 | カメラでQRコードを読み取り |
| 写真撮影 | カメラで資産の写真を撮影 |
| 商品登録 | 入力内容を登録 |

### バリデーション
- シールNo.: 必須
- 室名: 必須
- 一括登録モード時: 終了シールNo.必須、開始≤終了

### 画面遷移
- 戻る → メイン画面
- 履歴表示 → 登録履歴画面
- 商品登録 → (登録後、フォームクリア)

---

## 6. 登録履歴画面

### 画面概要
現有資産調査画面で登録した履歴をカード形式で表示。過去の登録情報を修正または再利用できる。

### スクリーンショット
![登録履歴画面](screenshots/06_登録履歴画面.png)

### 主要機能
- **履歴一覧表示**: カード形式で登録履歴を表示
- **カード選択**: 履歴カードをタップ/クリックで選択
- **情報修正**: 選択したカードの情報を直接編集
- **情報再利用**: 選択したカードの分類情報を調査画面にコピー

### 表示項目（カード内）
| 項目 | 説明 |
|------|------|
| 大分類 | 資産の大分類 |
| 中分類 | 資産の中分類 |
| 品目 | 資産の品目 |
| メーカー | 製造メーカー |
| 型式 | 型式番号 |
| サイズ | W×D×H (mm) |

### カード表示
- **通常状態**: 白背景
- **選択状態**: 青枠、チェックマーク表示
- **編集中**: オレンジ枠、入力フィールド表示

### フッターボタン
| ボタン | 通常時の動作 | 編集中の動作 |
|--------|------------|------------|
| 戻る | 調査画面へ戻る | 調査画面へ戻る |
| 修正 | 選択カードを編集モードに | 編集内容を保存 |
| 再利用 | 選択カードの情報を調査画面にコピー | 編集をキャンセル |

### 操作フロー

#### 修正の場合
1. カードを選択（タップ/クリック）
2. 「修正」ボタンをタップ
3. カード内で項目を直接編集
4. 「保存」ボタンで保存 or 「キャンセル」でキャンセル

#### 再利用の場合
1. カードを選択（タップ/クリック）
2. 「再利用」ボタンをタップ
3. 分類情報（大分類、中分類、品目、メーカー、型式、サイズ）が調査画面にセット
4. 自動的に調査画面へ遷移

### 画面遷移
- 戻る → 現有資産調査画面
- 再利用 → 現有資産調査画面（情報をセットして遷移）

---

## 7. 申請一覧画面

### 画面概要
資産購入・廃棄などの申請一覧を表示・管理する画面。

### スクリーンショット
![申請一覧画面](screenshots/07_申請一覧画面.png)

### 主要機能
- **申請一覧表示**: 申請をテーブル形式で表示
- **フィルター**: 申請種別、ステータス、期間等で絞り込み
- **詳細表示**: 申請の詳細情報をモーダルで表示
- **ステータス更新**: 承認/却下等のステータス変更
- **一括操作**: 複数申請を選択して一括処理

### 表示項目
| 列名 | 説明 |
|------|------|
| 選択 | チェックボックス |
| 申請番号 | システム生成の申請番号 |
| 申請種別 | 新規購入/更新/廃棄 |
| 申請日 | 申請日時 |
| 申請者 | 申請者名 |
| 資産名 | 対象資産の名称 |
| ステータス | 下書き/申請中/承認済み/却下/差戻 |
| 見積依頼No. | 関連する見積依頼番号 |
| 操作 | 詳細/編集/削除ボタン |

### フィルター項目
| 項目 | 説明 |
|------|------|
| 申請種別 | 新規購入/更新/廃棄 |
| ステータス | 下書き/申請中/承認済み/却下/差戻 |
| 見積依頼No. | 見積依頼番号での検索 |
| 期間（開始） | 申請日の開始日 |
| 期間（終了） | 申請日の終了日 |
| キーワード | 申請番号、資産名で検索 |

### ボタン/アクション
| ボタン | 動作 |
|--------|------|
| 詳細 | 申請詳細モーダルを表示 |
| 編集 | 申請編集画面へ遷移 |
| 削除 | 申請を削除（確認ダイアログ表示） |
| 一括承認 | 選択した申請を一括承認 |
| 一括却下 | 選択した申請を一括却下 |
| クリア | フィルターをクリア |
| エクスポート | CSV/Excelで出力 |

### ステータスバッジ
- **下書き**: グレー
- **申請中**: オレンジ
- **承認済み**: 緑
- **却下**: 赤
- **差戻**: オレンジ（暗め）

### 画面遷移
- 詳細 → 申請詳細モーダル
- 編集 → 申請編集画面
- ナビゲーション → 各種画面へ遷移

---

## 8. 見積依頼一覧画面

### 画面概要
業者への見積依頼を一覧表示・管理する画面。

### スクリーンショット
![見積依頼一覧画面](screenshots/08_見積依頼一覧画面.png)

### 主要機能
- **見積依頼一覧表示**: 見積依頼をテーブル形式で表示
- **ステータス管理**: 依頼中/回答待ち/回答済み等のステータス管理
- **詳細表示**: 見積依頼の詳細情報を表示
- **業者管理**: 依頼先業者の情報管理

### 表示項目
| 列名 | 説明 |
|------|------|
| 見積依頼No. | システム生成の依頼番号 |
| 依頼日 | 見積依頼日 |
| 資産名 | 対象資産の名称 |
| 依頼先 | 依頼業者名 |
| ステータス | 依頼中/回答待ち/回答済み/期限切れ |
| 回答期限 | 見積回答の期限日 |
| 関連申請 | 関連する申請番号 |
| 操作 | 詳細/編集/削除ボタン |

### ボタン/アクション
| ボタン | 動作 |
|--------|------|
| 新規作成 | 新規見積依頼を作成 |
| 詳細 | 見積依頼詳細を表示 |
| 編集 | 見積依頼を編集 |
| 削除 | 見積依頼を削除 |
| エクスポート | CSV/Excelで出力 |

### ステータスバッジ
- **依頼中**: オレンジ
- **回答待ち**: 青
- **回答済み**: 緑
- **期限切れ**: 赤

### 画面遷移
- 新規作成 → 見積依頼作成画面
- 詳細 → 見積依頼詳細画面
- 編集 → 見積依頼編集画面

---

## 9. 見積DataBox画面

### 画面概要
業者からの見積回答を一元管理する画面。複数業者の見積を比較・検討できる。

### スクリーンショット
![見積DataBox画面](screenshots/09_見積DataBox画面.png)

### 主要機能
- **見積一覧表示**: 業者別の見積情報を表示
- **見積比較**: 複数業者の見積を並べて比較
- **ステータス管理**: 検討中/採用/不採用等のステータス管理
- **備考管理**: 各見積への備考・コメント追加

### 表示項目
| 列名 | 説明 |
|------|------|
| 見積No. | 見積番号 |
| 業者名 | 見積提出業者名 |
| 資産名 | 対象資産 |
| 単価 | 見積単価 |
| 数量 | 数量 |
| 合計金額 | 単価×数量 |
| 納期 | 納品予定日 |
| ステータス | 検討中/採用/不採用 |
| 備考 | メモ・コメント |

### ボタン/アクション
| ボタン | 動作 |
|--------|------|
| 比較 | 選択した見積を比較表示 |
| 採用 | 見積を採用 |
| 不採用 | 見積を不採用 |
| 備考追加 | 備考を追加・編集 |
| エクスポート | CSV/Excelで出力 |

### ステータスバッジ
- **検討中**: オレンジ
- **採用**: 緑
- **不採用**: グレー

### 画面遷移
- 比較 → 見積比較モーダル
- ナビゲーション → 各種画面へ遷移

---

## 10. 個体管理リスト画面

### 画面概要
管理対象資産を個体単位で一覧表示・管理する画面。

### スクリーンショット
![個体管理リスト画面](screenshots/10_個体管理リスト画面.png)

### 主要機能
- **個体一覧表示**: 資産の個体情報を表示
- **ステータス管理**: 稼働中/廃棄済み/修理中等のステータス管理
- **履歴管理**: 個体の移動・修理等の履歴管理
- **QRコード表示**: 個体に紐づくQRコード表示

### 表示項目
| 列名 | 説明 |
|------|------|
| 管理番号 | 個体管理番号 |
| QRコード | 紐づくQRコード番号 |
| 資産名 | 資産の名称 |
| メーカー | 製造メーカー |
| 型式 | 型式番号 |
| シリアルNo. | 製品のシリアル番号 |
| 設置場所 | 現在の設置場所 |
| ステータス | 稼働中/廃棄済み/修理中 |
| 最終更新日 | 情報の最終更新日 |
| 操作 | 詳細/編集/履歴ボタン |

### ボタン/アクション
| ボタン | 動作 |
|--------|------|
| 詳細 | 個体詳細情報を表示 |
| 編集 | 個体情報を編集 |
| 履歴 | 移動・修理履歴を表示 |
| QR印刷 | QRコードラベルを印刷 |
| エクスポート | CSV/Excelで出力 |

### ステータスバッジ
- **稼働中**: 緑
- **廃棄済み**: グレー
- **修理中**: オレンジ

### 画面遷移
- 詳細 → 個体詳細モーダル
- 編集 → 個体編集画面
- 履歴 → 履歴表示モーダル

---

## 11. SHIP施設マスタ画面

### 画面概要
SHIP（標準品名マスタ）の施設分類マスタを管理する画面。

### スクリーンショット
![SHIP施設マスタ画面](screenshots/11_SHIP施設マスタ画面.png)

### 主要機能
- **施設マスタ一覧表示**: SHIP施設分類をツリー表示
- **新規登録**: 新しい施設分類を追加
- **編集**: 既存の施設分類を編集
- **削除**: 施設分類を削除
- **インポート/エクスポート**: CSV/Excel形式でデータ入出力

### 表示項目
| 列名 | 説明 |
|------|------|
| SHIPコード | SHIP標準コード |
| 大分類 | 施設の大分類 |
| 中分類 | 施設の中分類 |
| 小分類 | 施設の小分類 |
| 施設名称 | 施設の名称 |
| 説明 | 施設の説明・補足 |
| 最終更新日 | 情報の最終更新日 |
| 操作 | 編集/削除ボタン |

### ボタン/アクション
| ボタン | 動作 |
|--------|------|
| 新規登録 | 新規施設分類登録モーダルを表示 |
| 編集 | 施設分類編集モーダルを表示 |
| 削除 | 施設分類を削除（確認ダイアログ表示） |
| インポート | CSV/Excelから一括登録 |
| エクスポート | CSV/Excelで出力 |

### 階層構造
- 大分類 → 中分類 → 小分類の3階層
- ツリー表示で階層関係を可視化

### 画面遷移
- 新規登録 → 施設分類登録モーダル
- 編集 → 施設分類編集モーダル
- ナビゲーション → 各種画面へ遷移

---

## 12. SHIP資産マスタ画面

### 画面概要
SHIP（標準品名マスタ）の資産分類マスタを管理する画面。

### スクリーンショット
![SHIP資産マスタ画面](screenshots/12_SHIP資産マスタ画面.png)

### 主要機能
- **資産マスタ一覧表示**: SHIP資産分類を表示
- **新規登録**: 新しい資産分類を追加
- **編集**: 既存の資産分類を編集
- **削除**: 資産分類を削除
- **インポート/エクスポート**: CSV/Excel形式でデータ入出力
- **検索・フィルター**: 分類、メーカー、型式等で絞り込み

### 表示項目
| 列名 | 説明 |
|------|------|
| SHIPコード | SHIP標準コード |
| 大分類 | 資産の大分類 |
| 中分類 | 資産の中分類 |
| 品目 | 資産の品目 |
| メーカー | 製造メーカー |
| 型式 | 型式番号 |
| サイズ | W×D×H (mm) |
| 重量 | 重量 (kg) |
| 説明 | 資産の説明・補足 |
| 最終更新日 | 情報の最終更新日 |
| 操作 | 編集/削除ボタン |

### ボタン/アクション
| ボタン | 動作 |
|--------|------|
| 新規登録 | 新規資産分類登録モーダルを表示 |
| 編集 | 資産分類編集モーダルを表示 |
| 削除 | 資産分類を削除（確認ダイアログ表示） |
| インポート | CSV/Excelから一括登録 |
| エクスポート | CSV/Excelで出力 |

### フィルター項目
| 項目 | 説明 |
|------|------|
| 大分類 | 大分類で絞り込み |
| 中分類 | 中分類で絞り込み |
| 品目 | 品目で絞り込み |
| メーカー | メーカーで絞り込み |
| キーワード | コード、名称で検索 |

### 画面遷移
- 新規登録 → 資産分類登録モーダル
- 編集 → 資産分類編集モーダル
- ナビゲーション → 各種画面へ遷移

---

## 共通仕様

### ヘッダー
すべての画面に共通のヘッダーを表示
- ロゴ: SHIP HEALTHCARE
- システム名: 医療機器管理システム
- ユーザー情報: ログインユーザー名、ログアウトボタン

### フッター
画面によって固定フッターまたはアクションボタンを配置

### レスポンシブ対応
- PC: 1200px以上
- タブレット: 768px〜1199px
- スマートフォン: 767px以下

### 配色
- プライマリカラー: #3498db (青)
- セカンダリカラー: #2c3e50 (ダークグレー)
- 成功: #27ae60 (緑)
- 警告: #f39c12 (オレンジ)
- エラー: #e74c3c (赤)
- 背景: #f5f5f5 (ライトグレー)

### フォント
- 基本フォント: システムフォント（San Francisco, Helvetica, Arial等）
- 日本語: ヒラギノ角ゴ, メイリオ等

---

## 画面フロー図

```
[メイン画面]
    ├─ [QRコード発行画面] → [QRコード印刷プレビュー画面]
    ├─ [資産検索結果画面] → [資産詳細モーダル]
    ├─ [現有資産調査画面] ⇄ [登録履歴画面]
    ├─ [申請一覧画面] → [申請詳細モーダル]
    ├─ [見積依頼一覧画面]
    ├─ [見積DataBox画面]
    ├─ [個体管理リスト画面]
    ├─ [SHIP施設マスタ画面]
    └─ [SHIP資産マスタ画面]
```

---

## 更新履歴

| 日付 | バージョン | 更新内容 |
|------|-----------|---------|
| 2025-11-27 | 1.0 | 初版作成 |

---

## 備考

### スクリーンショット撮影方法
1. ローカルサーバーを起動: `python3 -m http.server 8080`
2. ブラウザで http://localhost:8080/index.html を開く
3. 各画面に遷移してスクリーンショットを撮影
4. `docs/screenshots/` に保存

### ドキュメント管理
- このドキュメントは `/docs/画面設計書.md` に保存
- スクリーンショットは `/docs/screenshots/` に保存
- 更新時はバージョン番号を更新
