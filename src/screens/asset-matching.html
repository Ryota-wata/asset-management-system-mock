<!-- è³‡ç”£ç®¡ç†å°å¸³ã¨è³‡ç”£ãƒã‚¹ã‚¿çªãåˆã‚ã›ç”»é¢ï¼ˆ2ãƒšã‚¤ãƒ³åˆ†å‰²æ–¹å¼ï¼‰ -->
<div id="assetMatchingPage" class="asset-matching-page">
    <div class="main-container-matching">
        <!-- ãƒ˜ãƒƒãƒ€ãƒ¼ -->
        <header class="header-matching">
            <div class="header-left-matching">
                <h1 class="header-title-matching">è³‡ç”£å°å¸³ã¨ãƒã‚¹ã‚¿ã®çªãåˆã‚ã›</h1>
            </div>
            <div class="header-right-matching">
                <div class="progress-info-matching">
                    <span class="progress-label-matching">é€²æ—:</span>
                    <span class="progress-value-matching" id="progressCount">0 / 5000</span>
                    <span class="progress-separator-matching">|</span>
                    <span class="completed-label-matching">å®Œäº†:</span>
                    <span class="completed-value-matching" id="completedCount">0ä»¶</span>
                </div>
            </div>
        </header>

        <!-- ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼ãƒãƒ¼ -->
        <div class="filter-bar-matching">
            <div class="filter-buttons-matching">
                <button class="filter-btn-matching active" onclick="filterMatchingData('all')" data-filter="all">
                    ã™ã¹ã¦ <span class="filter-count-matching">(5000)</span>
                </button>
                <button class="filter-btn-matching" onclick="filterMatchingData('pending')" data-filter="pending">
                    æœªå‡¦ç† <span class="filter-count-matching">(4850)</span>
                </button>
                <button class="filter-btn-matching" onclick="filterMatchingData('inProgress')" data-filter="inProgress">
                    ä½œæ¥­ä¸­ <span class="filter-count-matching">(120)</span>
                </button>
                <button class="filter-btn-matching" onclick="filterMatchingData('completed')" data-filter="completed">
                    æ¸ˆ <span class="filter-count-matching">(30)</span>
                </button>
            </div>
            <div class="bulk-actions-matching">
                <button class="bulk-action-btn-matching" onclick="autoConfirmHighSimilarity()">
                    <span>âš¡</span>
                    <span>é«˜é¡ä¼¼åº¦ã‚’ä¸€æ‹¬ç¢ºå®š</span>
                </button>
            </div>
        </div>

        <!-- ãƒ¡ã‚¤ãƒ³ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ï¼ˆ2ãƒšã‚¤ãƒ³åˆ†å‰²ï¼‰ -->
        <main class="main-content-matching">
            <!-- å·¦ãƒšã‚¤ãƒ³ï¼šã‚¤ãƒ³ãƒãƒ¼ãƒˆãƒ‡ãƒ¼ã‚¿ãƒ†ãƒ¼ãƒ–ãƒ« -->
            <div class="left-pane-matching">
                <div class="pane-header-matching">
                    <h2 class="pane-title-matching">ã‚¤ãƒ³ãƒãƒ¼ãƒˆãƒ‡ãƒ¼ã‚¿ä¸€è¦§</h2>
                    <div class="search-box-matching">
                        <input type="text" class="search-input-matching" placeholder="è³‡ç”£ç•ªå·ã€å“åã§æ¤œç´¢..."
                               onkeyup="searchImportData(this.value)">
                    </div>
                </div>
                <div class="table-container-matching">
                    <table class="import-table-matching">
                        <thead>
                            <tr>
                                <th class="th-no-matching">No.</th>
                                <th class="th-status-matching">çŠ¶æ…‹</th>
                                <th class="th-asset-no-matching">è³‡ç”£ç•ªå·</th>
                                <th class="th-name-matching">ç™»éŒ²å“ç›®å</th>
                                <th class="th-similarity-matching">é¡ä¼¼åº¦</th>
                            </tr>
                        </thead>
                        <tbody id="importTableBody">
                            <!-- ã‚µãƒ³ãƒ—ãƒ«ãƒ‡ãƒ¼ã‚¿è¡Œï¼ˆJavaScriptã§å‹•çš„ç”Ÿæˆï¼‰ -->
                            <tr class="import-row-matching active" data-index="0" data-status="pending" onclick="selectImportRow(0)">
                                <td class="td-no-matching">1</td>
                                <td class="td-status-matching">
                                    <span class="status-icon-matching pending">â—</span>
                                    <span class="status-text-matching">æœªå‡¦ç†</span>
                                </td>
                                <td class="td-asset-no-matching">A-001-2023</td>
                                <td class="td-name-matching">MRIè£…ç½® ã‚·ãƒ¼ãƒ¡ãƒ³ã‚¹ MAGNETOM</td>
                                <td class="td-similarity-matching">
                                    <span class="similarity-badge-matching high">98%</span>
                                </td>
                            </tr>
                            <tr class="import-row-matching" data-index="1" data-status="completed" onclick="selectImportRow(1)">
                                <td class="td-no-matching">2</td>
                                <td class="td-status-matching">
                                    <span class="status-icon-matching completed">âœ“</span>
                                    <span class="status-text-matching">æ¸ˆ</span>
                                </td>
                                <td class="td-asset-no-matching">A-002-2023</td>
                                <td class="td-name-matching">CTè£…ç½® GE Healthcare</td>
                                <td class="td-similarity-matching">
                                    <span class="similarity-badge-matching high">95%</span>
                                </td>
                            </tr>
                            <tr class="import-row-matching" data-index="2" data-status="inProgress" onclick="selectImportRow(2)">
                                <td class="td-no-matching">3</td>
                                <td class="td-status-matching">
                                    <span class="status-icon-matching inProgress">â–¶</span>
                                    <span class="status-text-matching">ä½œæ¥­ä¸­</span>
                                </td>
                                <td class="td-asset-no-matching">A-003-2023</td>
                                <td class="td-name-matching">äººå·¥å‘¼å¸å™¨ ãƒ‰ãƒ¬ãƒ¼ã‚²ãƒ«</td>
                                <td class="td-similarity-matching">
                                    <span class="similarity-badge-matching medium">88%</span>
                                </td>
                            </tr>
                            <tr class="import-row-matching" data-index="3" data-status="pending" onclick="selectImportRow(3)">
                                <td class="td-no-matching">4</td>
                                <td class="td-status-matching">
                                    <span class="status-icon-matching pending">â—</span>
                                    <span class="status-text-matching">æœªå‡¦ç†</span>
                                </td>
                                <td class="td-asset-no-matching">A-004-2023</td>
                                <td class="td-name-matching">è¶…éŸ³æ³¢è¨ºæ–­è£…ç½® ã‚­ãƒ¤ãƒãƒ³ãƒ¡ãƒ‡ã‚£ã‚«ãƒ«</td>
                                <td class="td-similarity-matching">
                                    <span class="similarity-badge-matching low">65%</span>
                                </td>
                            </tr>
                            <tr class="import-row-matching" data-index="4" data-status="pending" onclick="selectImportRow(4)">
                                <td class="td-no-matching">5</td>
                                <td class="td-status-matching">
                                    <span class="status-icon-matching pending">â—</span>
                                    <span class="status-text-matching">æœªå‡¦ç†</span>
                                </td>
                                <td class="td-asset-no-matching">A-005-2023</td>
                                <td class="td-name-matching">å†…è¦–é¡ã‚·ã‚¹ãƒ†ãƒ  ã‚ªãƒªãƒ³ãƒ‘ã‚¹</td>
                                <td class="td-similarity-matching">
                                    <span class="similarity-badge-matching high">92%</span>
                                </td>
                            </tr>
                            <!-- ... ã“ã“ã«5000ä»¶ã¾ã§ãƒ‡ãƒ¼ã‚¿ãŒå…¥ã‚‹æƒ³å®š ... -->
                        </tbody>
                    </table>
                </div>
                <div class="pagination-matching">
                    <button class="pagination-btn-matching" onclick="goToPreviousPage()">â† å‰ã¸</button>
                    <span class="pagination-info-matching">1 - 100 / 5000</span>
                    <button class="pagination-btn-matching" onclick="goToNextPage()">æ¬¡ã¸ â†’</button>
                </div>
            </div>

            <!-- å³ãƒšã‚¤ãƒ³ï¼šAIæ¨è–¦ã¨è©³ç´°ç·¨é›† -->
            <div class="right-pane-matching">
                <div class="pane-header-matching">
                    <h2 class="pane-title-matching">
                        <span>è©³ç´°ç¢ºèªãƒ»ç·¨é›†</span>
                        <span class="current-row-info-matching" id="currentRowInfo">(1/5000)</span>
                    </h2>
                </div>

                <!-- ã‚¤ãƒ³ãƒãƒ¼ãƒˆãƒ‡ãƒ¼ã‚¿è©³ç´° -->
                <div class="import-detail-section-matching">
                    <h3 class="section-title-matching">ã‚¤ãƒ³ãƒãƒ¼ãƒˆãƒ‡ãƒ¼ã‚¿</h3>
                    <div class="detail-grid-matching">
                        <div class="detail-row-matching">
                            <label class="detail-label-matching">è³‡ç”£ç•ªå·:</label>
                            <span class="detail-value-matching" id="detailAssetNo">A-001-2023</span>
                        </div>
                        <div class="detail-row-matching">
                            <label class="detail-label-matching">ç™»éŒ²å“ç›®å:</label>
                            <span class="detail-value-matching" id="detailProductName">MRIè£…ç½® ã‚·ãƒ¼ãƒ¡ãƒ³ã‚¹ MAGNETOM</span>
                        </div>
                        <div class="detail-row-matching">
                            <label class="detail-label-matching">å–å¾—å¹´æœˆæ—¥:</label>
                            <span class="detail-value-matching" id="detailAcquisitionDate">2023/04/15</span>
                        </div>
                        <div class="detail-row-matching">
                            <label class="detail-label-matching">å–å¾—ä¾¡é¡:</label>
                            <span class="detail-value-matching" id="detailAcquisitionPrice">Â¥85,000,000</span>
                        </div>
                    </div>
                </div>

                <!-- AIæ¨è–¦ã‚»ã‚¯ã‚·ãƒ§ãƒ³ -->
                <div class="ai-recommendations-section-matching">
                    <h3 class="section-title-matching">
                        <span>ğŸ¤– AIæ¨è–¦ãƒã‚¹ã‚¿ãƒ‡ãƒ¼ã‚¿</span>
                        <button class="master-search-btn-matching" onclick="showAssetMasterModal()">
                            ğŸ“‹ è³‡ç”£ãƒã‚¹ã‚¿å…¨ä½“ã‚’æ¤œç´¢
                        </button>
                    </h3>

                    <!-- AIæ¨è–¦1 -->
                    <div class="recommendation-card-matching selected" data-recommendation="1" onclick="selectRecommendation(1)">
                        <div class="recommendation-header-matching">
                            <span class="recommendation-label-matching">æ¨è–¦1</span>
                            <span class="similarity-badge-matching high">é¡ä¼¼åº¦: 98%</span>
                            <span class="selected-indicator-matching">âœ“ é¸æŠä¸­</span>
                        </div>
                        <div class="recommendation-body-matching">
                            <div class="recommendation-row-matching">
                                <span class="rec-label-matching">å¤§åˆ†é¡:</span>
                                <input type="text" class="rec-input-matching" value="åŒ»ç™‚æ©Ÿå™¨" onchange="markAsEdited()">
                            </div>
                            <div class="recommendation-row-matching">
                                <span class="rec-label-matching">ä¸­åˆ†é¡:</span>
                                <input type="text" class="rec-input-matching" value="ç”»åƒè¨ºæ–­è£…ç½®" onchange="markAsEdited()">
                            </div>
                            <div class="recommendation-row-matching">
                                <span class="rec-label-matching">å€‹ä½“ç®¡ç†å“ç›®:</span>
                                <input type="text" class="rec-input-matching" value="MRIè£…ç½®" onchange="markAsEdited()">
                            </div>
                            <div class="recommendation-row-matching">
                                <span class="rec-label-matching">ãƒ¡ãƒ¼ã‚«ãƒ¼å:</span>
                                <input type="text" class="rec-input-matching" value="ã‚·ãƒ¼ãƒ¡ãƒ³ã‚¹ãƒ˜ãƒ«ã‚¹ã‚±ã‚¢" onchange="markAsEdited()">
                            </div>
                            <div class="recommendation-row-matching">
                                <span class="rec-label-matching">å‹å¼:</span>
                                <input type="text" class="rec-input-matching" value="MAGNETOM Vida 3T" onchange="markAsEdited()">
                            </div>
                        </div>
                        <button class="select-rec-btn-matching selected">é¸æŠä¸­</button>
                    </div>

                    <!-- AIæ¨è–¦2 -->
                    <div class="recommendation-card-matching" data-recommendation="2" onclick="selectRecommendation(2)">
                        <div class="recommendation-header-matching">
                            <span class="recommendation-label-matching">æ¨è–¦2</span>
                            <span class="similarity-badge-matching medium">é¡ä¼¼åº¦: 85%</span>
                        </div>
                        <div class="recommendation-body-matching">
                            <div class="recommendation-row-matching">
                                <span class="rec-label-matching">å¤§åˆ†é¡:</span>
                                <input type="text" class="rec-input-matching" value="åŒ»ç™‚æ©Ÿå™¨" onchange="markAsEdited()">
                            </div>
                            <div class="recommendation-row-matching">
                                <span class="rec-label-matching">ä¸­åˆ†é¡:</span>
                                <input type="text" class="rec-input-matching" value="ç”»åƒè¨ºæ–­è£…ç½®" onchange="markAsEdited()">
                            </div>
                            <div class="recommendation-row-matching">
                                <span class="rec-label-matching">å€‹ä½“ç®¡ç†å“ç›®:</span>
                                <input type="text" class="rec-input-matching" value="MRIè£…ç½®ï¼ˆæ±ç”¨ï¼‰" onchange="markAsEdited()">
                            </div>
                            <div class="recommendation-row-matching">
                                <span class="rec-label-matching">ãƒ¡ãƒ¼ã‚«ãƒ¼å:</span>
                                <input type="text" class="rec-input-matching" value="ã‚·ãƒ¼ãƒ¡ãƒ³ã‚¹" onchange="markAsEdited()">
                            </div>
                            <div class="recommendation-row-matching">
                                <span class="rec-label-matching">å‹å¼:</span>
                                <input type="text" class="rec-input-matching" value="MAGNETOM ã‚·ãƒªãƒ¼ã‚º" onchange="markAsEdited()">
                            </div>
                        </div>
                        <button class="select-rec-btn-matching" onclick="selectRecommendation(2)">é¸æŠ</button>
                    </div>

                    <!-- AIæ¨è–¦3 -->
                    <div class="recommendation-card-matching" data-recommendation="3" onclick="selectRecommendation(3)">
                        <div class="recommendation-header-matching">
                            <span class="recommendation-label-matching">æ¨è–¦3</span>
                            <span class="similarity-badge-matching low">é¡ä¼¼åº¦: 72%</span>
                        </div>
                        <div class="recommendation-body-matching">
                            <div class="recommendation-row-matching">
                                <span class="rec-label-matching">å¤§åˆ†é¡:</span>
                                <input type="text" class="rec-input-matching" value="åŒ»ç™‚æ©Ÿå™¨" onchange="markAsEdited()">
                            </div>
                            <div class="recommendation-row-matching">
                                <span class="rec-label-matching">ä¸­åˆ†é¡:</span>
                                <input type="text" class="rec-input-matching" value="è¨ºæ–­æ©Ÿå™¨" onchange="markAsEdited()">
                            </div>
                            <div class="recommendation-row-matching">
                                <span class="rec-label-matching">å€‹ä½“ç®¡ç†å“ç›®:</span>
                                <input type="text" class="rec-input-matching" value="ç£æ°—å…±é³´ç”»åƒè¨ºæ–­è£…ç½®" onchange="markAsEdited()">
                            </div>
                            <div class="recommendation-row-matching">
                                <span class="rec-label-matching">ãƒ¡ãƒ¼ã‚«ãƒ¼å:</span>
                                <input type="text" class="rec-input-matching" value="ãã®ä»–" onchange="markAsEdited()">
                            </div>
                            <div class="recommendation-row-matching">
                                <span class="rec-label-matching">å‹å¼:</span>
                                <input type="text" class="rec-input-matching" value="ä¸æ˜" onchange="markAsEdited()">
                            </div>
                        </div>
                        <button class="select-rec-btn-matching" onclick="selectRecommendation(3)">é¸æŠ</button>
                    </div>
                </div>

                <!-- ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ãƒœã‚¿ãƒ³ -->
                <div class="action-section-matching">
                    <button class="action-btn-matching secondary" onclick="skipCurrentRow()">
                        <span>ã‚¹ã‚­ãƒƒãƒ—</span>
                    </button>
                    <button class="action-btn-matching primary" onclick="confirmCurrentRow()">
                        <span>ç¢ºå®šã—ã¦æ¬¡ã¸</span>
                        <span>â†’</span>
                    </button>
                </div>
            </div>
        </main>

        <!-- ãƒ•ãƒƒã‚¿ãƒ¼ -->
        <footer class="footer-matching">
            <button class="footer-btn-matching secondary" onclick="handleBackFromMatching()">
                <span>â†</span>
                <span>æˆ»ã‚‹</span>
            </button>
            <button class="footer-btn-matching primary" onclick="completeMatching()">
                <span>çªãåˆã‚ã›å®Œäº†</span>
            </button>
        </footer>
    </div>
</div>

<script>
// ã‚°ãƒ­ãƒ¼ãƒãƒ«å¤‰æ•°
let currentSelectedRow = 0;
let selectedRecommendation = 1;
let importData = []; // å®Ÿéš›ã¯ã‚µãƒ¼ãƒãƒ¼ã‹ã‚‰5000ä»¶å–å¾—
let currentFilter = 'all';

/**
 * ã‚¤ãƒ³ãƒãƒ¼ãƒˆãƒ‡ãƒ¼ã‚¿è¡Œã‚’é¸æŠ
 */
function selectImportRow(index) {
    currentSelectedRow = index;

    // ã™ã¹ã¦ã®è¡Œã‹ã‚‰ active ã‚¯ãƒ©ã‚¹ã‚’å‰Šé™¤
    document.querySelectorAll('.import-row-matching').forEach(row => {
        row.classList.remove('active');
    });

    // é¸æŠã•ã‚ŒãŸè¡Œã« active ã‚¯ãƒ©ã‚¹ã‚’è¿½åŠ 
    const selectedRow = document.querySelector(`.import-row-matching[data-index="${index}"]`);
    if (selectedRow) {
        selectedRow.classList.add('active');

        // å³ãƒšã‚¤ãƒ³ã«è©³ç´°ãƒ‡ãƒ¼ã‚¿ã‚’è¡¨ç¤ºï¼ˆå®Ÿéš›ã®ãƒ‡ãƒ¼ã‚¿ã§æ›´æ–°ï¼‰
        updateRightPane(index);
    }
}

/**
 * å³ãƒšã‚¤ãƒ³ã®ãƒ‡ãƒ¼ã‚¿æ›´æ–°
 */
function updateRightPane(index) {
    // å®Ÿéš›ã«ã¯importData[index]ã®ãƒ‡ãƒ¼ã‚¿ã‚’ä½¿ç”¨
    document.getElementById('currentRowInfo').textContent = `(${index + 1}/5000)`;

    // è©³ç´°ãƒ‡ãƒ¼ã‚¿ã‚’æ›´æ–°ï¼ˆã‚µãƒ³ãƒ—ãƒ«ï¼‰
    // å®Ÿéš›ã«ã¯importDataé…åˆ—ã‹ã‚‰ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—
}

/**
 * AIæ¨è–¦ã‚’é¸æŠ
 */
function selectRecommendation(recNumber) {
    selectedRecommendation = recNumber;

    // ã™ã¹ã¦ã®æ¨è–¦ã‚«ãƒ¼ãƒ‰ã‹ã‚‰ selected ã‚¯ãƒ©ã‚¹ã‚’å‰Šé™¤
    document.querySelectorAll('.recommendation-card-matching').forEach(card => {
        card.classList.remove('selected');
    });

    // ã™ã¹ã¦ã®é¸æŠãƒœã‚¿ãƒ³ã‚’ãƒªã‚»ãƒƒãƒˆ
    document.querySelectorAll('.select-rec-btn-matching').forEach(btn => {
        btn.textContent = 'é¸æŠ';
        btn.classList.remove('selected');
    });

    // é¸æŠã•ã‚ŒãŸæ¨è–¦ã‚«ãƒ¼ãƒ‰ã« selected ã‚¯ãƒ©ã‚¹ã‚’è¿½åŠ 
    const selectedCard = document.querySelector(`.recommendation-card-matching[data-recommendation="${recNumber}"]`);
    if (selectedCard) {
        selectedCard.classList.add('selected');
        const btn = selectedCard.querySelector('.select-rec-btn-matching');
        btn.textContent = 'é¸æŠä¸­';
        btn.classList.add('selected');
    }

    // é¸æŠä¸­ã‚¤ãƒ³ã‚¸ã‚±ãƒ¼ã‚¿ãƒ¼ã‚’æ›´æ–°
    document.querySelectorAll('.selected-indicator-matching').forEach(indicator => {
        indicator.remove();
    });
    const header = selectedCard.querySelector('.recommendation-header-matching');
    const indicator = document.createElement('span');
    indicator.className = 'selected-indicator-matching';
    indicator.textContent = 'âœ“ é¸æŠä¸­';
    header.appendChild(indicator);
}

/**
 * ç¾åœ¨ã®è¡Œã‚’ç¢ºå®šã—ã¦æ¬¡ã¸
 */
function confirmCurrentRow() {
    // é¸æŠã•ã‚ŒãŸæ¨è–¦ãƒ‡ãƒ¼ã‚¿ã‚’è³‡ç”£ãƒã‚¹ã‚¿ã«ç™»éŒ²ï¼ˆå®Ÿéš›ã¯ã‚µãƒ¼ãƒãƒ¼å‡¦ç†ï¼‰
    console.log(`Row ${currentSelectedRow} confirmed with recommendation ${selectedRecommendation}`);

    // çŠ¶æ…‹ã‚’ã€Œæ¸ˆã€ã«æ›´æ–°
    const currentRow = document.querySelector(`.import-row-matching[data-index="${currentSelectedRow}"]`);
    if (currentRow) {
        currentRow.setAttribute('data-status', 'completed');
        const statusIcon = currentRow.querySelector('.status-icon-matching');
        const statusText = currentRow.querySelector('.status-text-matching');
        statusIcon.className = 'status-icon-matching completed';
        statusIcon.textContent = 'âœ“';
        statusText.textContent = 'æ¸ˆ';
    }

    // æ¬¡ã®æœªå‡¦ç†è¡Œã¸ç§»å‹•
    goToNextPendingRow();

    // é€²æ—ã‚«ã‚¦ãƒ³ãƒˆã‚’æ›´æ–°
    updateProgressCount();
}

/**
 * ç¾åœ¨ã®è¡Œã‚’ã‚¹ã‚­ãƒƒãƒ—
 */
function skipCurrentRow() {
    goToNextPendingRow();
}

/**
 * æ¬¡ã®æœªå‡¦ç†è¡Œã¸ç§»å‹•
 */
function goToNextPendingRow() {
    const allRows = document.querySelectorAll('.import-row-matching');
    let nextIndex = currentSelectedRow + 1;

    // æ¬¡ã®è¡Œã‚’é¸æŠ
    if (nextIndex < allRows.length) {
        selectImportRow(nextIndex);
    } else {
        alert('æœ€å¾Œã®è¡Œã«åˆ°é”ã—ã¾ã—ãŸ');
    }
}

/**
 * ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼é©ç”¨
 */
function filterMatchingData(filterType) {
    currentFilter = filterType;

    // ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼ãƒœã‚¿ãƒ³ã®ã‚¢ã‚¯ãƒ†ã‚£ãƒ–çŠ¶æ…‹ã‚’æ›´æ–°
    document.querySelectorAll('.filter-btn-matching').forEach(btn => {
        btn.classList.remove('active');
    });
    document.querySelector(`[data-filter="${filterType}"]`).classList.add('active');

    // ãƒ†ãƒ¼ãƒ–ãƒ«è¡Œã‚’ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°
    document.querySelectorAll('.import-row-matching').forEach(row => {
        const status = row.getAttribute('data-status');
        if (filterType === 'all') {
            row.style.display = '';
        } else if (filterType === status) {
            row.style.display = '';
        } else {
            row.style.display = 'none';
        }
    });
}

/**
 * ã‚¤ãƒ³ãƒãƒ¼ãƒˆãƒ‡ãƒ¼ã‚¿æ¤œç´¢
 */
function searchImportData(searchTerm) {
    const term = searchTerm.toLowerCase();
    document.querySelectorAll('.import-row-matching').forEach(row => {
        const assetNo = row.querySelector('.td-asset-no-matching').textContent.toLowerCase();
        const name = row.querySelector('.td-name-matching').textContent.toLowerCase();

        if (assetNo.includes(term) || name.includes(term)) {
            row.style.display = '';
        } else {
            row.style.display = 'none';
        }
    });
}

/**
 * ç·¨é›†ãƒãƒ¼ã‚«ãƒ¼
 */
function markAsEdited() {
    console.log('Data edited');
    // ç·¨é›†ã•ã‚ŒãŸã“ã¨ã‚’ç¤ºã™ãƒãƒ¼ã‚«ãƒ¼ã‚’è¡¨ç¤ºã™ã‚‹å‡¦ç†
}

/**
 * é€²æ—ã‚«ã‚¦ãƒ³ãƒˆæ›´æ–°
 */
function updateProgressCount() {
    const completedRows = document.querySelectorAll('.import-row-matching[data-status="completed"]').length;
    const totalRows = document.querySelectorAll('.import-row-matching').length;

    document.getElementById('progressCount').textContent = `${completedRows} / ${totalRows}`;
    document.getElementById('completedCount').textContent = `${completedRows}ä»¶`;
}

/**
 * é«˜é¡ä¼¼åº¦ã‚’ä¸€æ‹¬ç¢ºå®š
 */
function autoConfirmHighSimilarity() {
    if (confirm('é¡ä¼¼åº¦90%ä»¥ä¸Šã®ãƒ‡ãƒ¼ã‚¿ã‚’ä¸€æ‹¬ç¢ºå®šã—ã¾ã™ã‹ï¼Ÿ')) {
        // å®Ÿè£…ï¼šé¡ä¼¼åº¦90%ä»¥ä¸Šã®è¡Œã‚’è‡ªå‹•ç¢ºå®š
        console.log('Auto-confirming high similarity rows...');
    }
}

/**
 * ãƒšãƒ¼ã‚¸ãƒãƒ¼ã‚·ãƒ§ãƒ³
 */
function goToPreviousPage() {
    console.log('Go to previous page');
}

function goToNextPage() {
    console.log('Go to next page');
}

/**
 * çªãåˆã‚ã›å®Œäº†
 */
function completeMatching() {
    if (confirm('çªãåˆã‚ã›ã‚’å®Œäº†ã—ã¦ãƒã‚¹ã‚¿ã«ç™»éŒ²ã—ã¾ã™ã‹ï¼Ÿ')) {
        console.log('Completing matching process...');
        // å®Ÿéš›ã¯ã‚µãƒ¼ãƒãƒ¼ã«ãƒ‡ãƒ¼ã‚¿é€ä¿¡
    }
}

// åˆæœŸåŒ–
document.addEventListener('DOMContentLoaded', function() {
    if (document.getElementById('assetMatchingPage')) {
        updateProgressCount();
    }
});
</script>
