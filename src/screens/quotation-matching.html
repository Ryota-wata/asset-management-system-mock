<!-- 明細と申請の紐付けチェック画面 -->
<div id="quotationMatchingPage" class="quotation-matching-page">

    <div class="result-container">
        <!-- ヘッダー -->
        <header class="result-header">
            <div class="result-header-left">
                <div class="logo">
                    <div class="logo-icon">🔗</div>
                    <div class="result-header-title">明細と申請の紐付けチェック</div>
                </div>
                <span class="result-count" id="matchingProgressCount">-</span>
            </div>
            <div class="result-header-actions">
                <button class="header-btn primary" onclick="confirmMatching()">
                    <span class="btn-icon">✓</span>紐付けを確定
                </button>
                <button class="header-btn back" onclick="handleBackFromMatching()">戻る</button>
            </div>
        </header>

        <!-- メインコンテンツエリア -->
        <div class="main-content-area">
            <div class="content-wrapper">

                <!-- ヘルプセクション -->
                <div class="matching-help-box">
                    <div class="help-icon">💡</div>
                    <div class="help-content">
                        <h3>紐付けチェックの手順</h3>
                        <ol>
                            <li>AIが自動的に見積明細（個体管理品目のみ）と申請を紐付けています</li>
                            <li>各紐付けの内容を確認し、誤りがあれば修正してください</li>
                            <li>すべての紐付けを確認したら「紐付けを確定」ボタンで次へ進みます</li>
                        </ol>
                    </div>
                </div>

                <!-- 紐付けリスト -->
                <div class="matching-section">
                    <div class="matching-section-title">🔗 見積明細 ⇔ 申請の紐付け</div>

                    <div id="matchingListContainer">
                        <!-- JavaScriptで動的生成 -->
                    </div>
                </div>

            </div>
        </div>
    </div>

    <!-- 紐付け編集モーダル -->
    <div class="modal" id="matchingEditModal" onclick="handleMatchingEditModalOutsideClick(event)">
        <div class="modal-content" style="max-width: 1000px;">
            <h2 class="modal-title">紐付け編集</h2>

            <div id="matchingEditContent">
                <!-- JavaScriptで動的生成 -->
            </div>

            <div style="display: flex; gap: 10px; margin-top: 20px;">
                <button class="modal-button secondary" onclick="closeMatchingEditModal()" style="flex: 1;">キャンセル</button>
                <button class="modal-button" onclick="saveMatchingEdit()" style="flex: 1;">保存</button>
            </div>
        </div>
    </div>

</div>
